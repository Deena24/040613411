<!DOCTYPE html>
<html>
<head>
    <script>
        let student = [
            {
                fullname: 'นายตั้งใจ เรียนมาก',
                age: 18,
                year: 1,
                gpa: 3.40,
                help: true
            },
            {
                fullname: 'นายส่งงาน ตลอดมา',
                age: 19,
                year: 2,
                gpa: 3.00,
                help: false
            },
            {
                fullname: 'นางสาวใส่ใจ ดีงาม',
                age: 20,
                year: 3,
                gpa: 2.90,
                help: true
            }
        ];
    </script>
</head>
<body>
    <script>
        window.onload = function () {
            let i;
            for (i = 0; i < student.length; i++) {
                let currentStudent = student[i];
                let reason = '';

                function checkScholarship(student) {
                    if ((student.gpa >= 3.20) || (student.year >= 2 && student.help==true && student.gpa >= 2.75)) {
                        return 'ได้รับทุนการศึกษา';
                    } else {
                        return 'ไม่ได้รับทุนการศึกษา';
                    }
                }

                function checkReason(student) {
                    if((student.gpa >= 3.20) || (student.year >= 2 && student.help==true && student.gpa >= 2.75)) {
                        reason = 'เนื่องจากเกรดเฉลี่ยถึงเกณฑ์';
                        if(currentStudent.help==true){
                            reason = reason + 'และยังช่วยงานภาควิชาด้วย'; 
                        }else{
                            reason = reason + 'และยังไม่ได้ช่วยงานภาควิชา';
                        }
                    }else{
                        reason = 'เนื่องจากเกรดเฉลี่ยไม่ถึงเกณฑ์';
                        if(currentStudent.help==true){
                            reason = reason + 'และยังช่วยงานภาควิชาด้วย'; 
                        }else{
                            reason = reason + 'และยังไม่ได้ช่วยงานภาควิชา';
                        }
                    }
                    return reason;
                }
                console.log(currentStudent.fullname + ' เกิดเมื่อปี ' + (2564 - currentStudent.age) + ' ' + checkScholarship(currentStudent) + ' ' + checkReason(currentStudent));
            }

            for (i = 0; i < student.length; i++) {
                let reportStudent = student[i];
              
                if((student[i].gpa >= 3.20) || (student[i].year >= 2 && student[i].help==true && student[i].gpa >= 2.75)) {
                    console.log(' ชั้นปีที่ ' + student[i].year + '\n' + student[i].fullname + ' ' + checkReason(reportStudent));
                }
                else{
                    console.log(' ชั้นปีที่ ' + student[i].year + '\n' +' ไม่มี ');
                }
            }
        };
    </script>
</body>
</html>